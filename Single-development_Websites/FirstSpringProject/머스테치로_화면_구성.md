[이전으로](../Readme.md)
# 머스테치로 화면 구성하기
#### 머스테치를 이용해 기본적인 CRUD 게시판 화면을 구현한다.

---
### 템플릿 엔진
* ``` 지정된 템플릿 양식```과 ```데이터```가 합쳐져 HTML 문서를 출력하는 소프트웨어 이다.
* ```서버 템플릿 엔진```과 ```클라이언트 템플릿 엔진```으로 나뉜다.
> 자바의 서버 템플릿 엔진: ```JSP```, ```Velocity```, ```Freemaker```,  ```Thymeleaf```
---
### 머스테치(Mustache) 란?
* 수많은 언어를 지원하는 가장 심플한 템플릿 엔진이다. (서버 템플릿 엔진이다.)
* Mustache.js, Mustache.java 모두 있어 하나의 문법으로 클라이언트/서버 템플릿을 모두 사용가능하다.

---
## 1. 기본 페이지 만들기

### 1.1 의존성 설정
* build.gradle에 다음과 같이 의존성을 추가 한다.
``` aidl
compile('org.springframework.boot:spring-boot-starter-mustache')
```

### 1.2 index.mustache 생성
* 머스테치의 파일 위치는 기본적으로 src/main/resources/templates이며, 이 위치에 두면 스프링 부트에서 자동으로 로딩한다.
* 아래와 같이 index.mustache 파일을 생성한다.
```html
<!DOCTYPE HTML>
<html>
<head>
    <title>제목</title>
    <meta http-equiv="Content-Type" content="text/html"; charset="UTF-8"/>
</head>
<body>
    <h1>스프링 부트~~</h1>
</body>
</html>
```

### 1.3 URL 매핑
* index.mustache에 URL을 매핑한다.
* Controller에서 매핑해야 하므로 IndexController를 생성한다.
```java
@Controller
public class IndexController {

    @GetMapping("/")
    public String index(){
        return "index";
    }
}
```
* 머스테치 스타터 덕분에 컨트롤러에서 문자열을 반환할 때 앞의 경로와 뒤의 파일 확장자는 자동으로 지정 된다.

### 1.4 테스트
* 다음과 같은 테스트 클래스를 /test/web/ 에 만들어 준다
```java
@RunWith(SpringRunner.class)
@SpringBootTest(webEnvironment = RANDOM_PORT)
public class IndexControllerTest {

    @Autowired
    private TestRestTemplate restTemplate;

    @Test
    public void 인덱스_로딩(){
        //given
        //when
        String body = this.restTemplate.getForObject("/", String.class);
        //then
        assertThat(body).contains("스프링 부트~~");
    }
}
```
* URL 호출 시 페이지의 내용이 제대로 호출 되는지에 대한 테스트이다.
* 실제로 실행 시킨 후 localhost:8080에 접속하면 잘 나오는 것을 확인 할 수 있다.

---